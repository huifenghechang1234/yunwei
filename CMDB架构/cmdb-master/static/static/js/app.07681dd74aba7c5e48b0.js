webpackJsonp([23],{"0RRq":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("gyMJ"),s={data:function(){return console.log("this.props.data:",this.data),{is_visible:!0,form_data:{},errors:{},countdown:0}},props:["data"],mounted:function(){},methods:{on_close:function(){this.$el.parentNode.removeChild(this.$el),this.$destroy()},send_verify_code:function(){var e=this;r.a.post("mgmt/user/send-verify-code",{username:this.form_data.username}).then(function(t){e.$message.success("验证码已发送至"+t.data.email),e.errors.username&&(e.errors.username=""),e.countdown=60;var a=e;!function e(){a.countdown-=1,a.countdown<=0||setTimeout(e,1e3)}()}).catch(function(t){if(t.response&&t.response.data)return t.response.data.detail?void e.$message.error(t.response.data.detail):void(e.errors=t.response.data);console.log(t.message)})},submit:function(){var e=this;r.a.post("mgmt/user/reset-password-email",this.form_data).then(function(t){e.$message.success("重置成功"),e.errors={}}).catch(function(t){if(t.response&&t.response.data)return t.response.data.detail?void e.$message.error(t.response.data.detail):void(e.errors=t.response.data);console.log(t.message)})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"440px",title:"重置密码",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("el-form",{staticStyle:{"margin-right":"50px"},attrs:{"label-width":"100px"}},[a("h3",{staticStyle:{color:"#f56c6c","text-align":"center"}},[e._v(e._s(String(e.errors.non_field_errors?e.errors.non_field_errors:"")))]),e._v(" "),a("el-form-item",{attrs:{label:"用户名",required:!0,error:String(e.errors.username?e.errors.username:"")}},[a("el-input",{model:{value:e.form_data.username,callback:function(t){e.$set(e.form_data,"username",t)},expression:"form_data.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"验证码",required:!0,error:String(e.errors.verify_code?e.errors.verify_code:"")}},[a("el-input",{staticStyle:{width:"125px"},model:{value:e.form_data.verify_code,callback:function(t){e.$set(e.form_data,"verify_code",t)},expression:"form_data.verify_code"}}),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!!e.countdown},on:{click:e.send_verify_code}},[e._v(e._s(e.countdown?e.countdown+"|重新发送":"发送验证码")+" ")])],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",required:!0,error:String(e.errors.new_password?e.errors.new_password:"")}},[a("el-input",{attrs:{type:"password"},model:{value:e.form_data.new_password,callback:function(t){e.$set(e.form_data,"new_password",t)},expression:"form_data.new_password"}})],1),e._v(" "),a("el-button",{staticStyle:{width:"100%","margin-left":"50px"},attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")])],1)],1)},staticRenderFns:[]},n=a("VU/8")(s,o,!1,null,null,null);t.default=n.exports},"1uuo":function(e,t){},"3BNv":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={data:function(){return console.log("this.props.data:",this.data),{is_visible:!0,ddd:[{name:"zhangsan"}]}},props:["data","source"],mounted:function(){console.log("mounted"),console.log("data:",this.data),console.log("table_data:",this.table_data)},methods:{on_close:function(){this.$el.parentNode.removeChild(this.$el),this.$destroy()}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"900px",title:e.data._index+"\\"+e.data._id+" 详细信息",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("el-table",{attrs:{data:[e.data._source],fit:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"S-creator",label:"创建者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"S-creation-time",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"S-delete-people",label:"删除者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"S-delete-time",label:"删除时间"}}),e._v(" "),e._l(e.data._source,function(t,r){return"S"!=r[0]?a("el-table-column",{key:r,attrs:{label:r},scopedSlots:e._u([{key:"default",fn:function(r){return[a("span",[e._v(e._s(t))])]}}])}):e._e()})],2)],1)},staticRenderFns:[]},o=a("VU/8")(r,s,!1,null,null,null);t.default=o.exports},"9rwn":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mvHQ"),s=a.n(r),o=a("gyMJ"),n={name:"change-user",data:function(){return{is_visible:!0,form_data:this.is_create?{username:"",is_staff:!1,email:""}:JSON.parse(s()(this.data)),errors:{}}},props:["is_create","data"],mounted:function(){console.log("data:",this.data)},methods:{on_close:function(){this.$el.parentNode.removeChild(this.$el),this.$destroy()},on_submit:function(){var e=this;this.is_create?o.b.post("mgmt/user",this.form_data).then(function(t){e.$message.success("添加成功"),e.errors={}}).catch(function(t){e.errors=t.response.data}):o.b.patch("mgmt/user/"+this.data.id,this.form_data).then(function(t){for(var a in e.$message.success("修改成功"),e.errors={},e.form_data)e.data[a]=e.form_data[a]}).catch(function(t){e.errors=t.response.data})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"440px",title:e.data?"修改用户 "+e.data.username:"创建用户",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("el-form",{staticStyle:{"margin-right":"50px"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名:",error:String(e.errors.username?e.errors.username:"")}},[a("el-input",{model:{value:e.form_data.username,callback:function(t){e.$set(e.form_data,"username",t)},expression:"form_data.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否为管理员"}},[a("el-checkbox",{model:{value:e.form_data.is_staff,callback:function(t){e.$set(e.form_data,"is_staff",t)},expression:"form_data.is_staff"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱:",error:String(e.errors.email?e.errors.email:"")}},[a("el-input",{model:{value:e.form_data.email,callback:function(t){e.$set(e.form_data,"email",t)},expression:"form_data.email"}})],1),e._v(" "),e.is_create?e._e():a("el-form-item",{attrs:{label:"密码:",error:String(e.errors.password?e.errors.password:"")}},[a("el-input",{attrs:{type:"password"},model:{value:e.form_data.password,callback:function(t){e.$set(e.form_data,"password",t)},expression:"form_data.password"}})],1),e._v(" "),a("el-form-item")],1),e._v(" "),a("el-button",{staticStyle:{width:"360px",margin:"0 20px"},attrs:{type:"primary"},on:{click:e.on_submit}},[e._v("提交")])],1)},staticRenderFns:[]};var l=a("VU/8")(n,i,!1,function(e){a("QuAL")},"data-v-8db9dac8",null);t.default=l.exports},A66B:function(e,t,a){e.exports=function(e){return function(){return a("Opzk")("./"+e+".vue")}}},"E4+W":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("gyMJ"),s={data:function(){return{is_visible:!0,data:[],max_height:0}},props:["data_index","data_id"],mounted:function(){var e=this;this.max_height=.65*window.innerHeight>420?.65*window.innerHeight:420,console.log("height:",this.max_height),r.a.get("record-data/"+this.data_index+"/"+this.data_id).then(function(t){for(var a in t.data.hits)e.data.push(t.data.hits[a]._source)}).catch(function(t){t.response&&t.response.data&&e.$message.error(t.response.data),console.log(t.message)})},methods:{on_close:function(){console.log("this.id:2",this.data_id),this.$el.parentNode.removeChild(this.$el),this.$destroy()}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"900px",title:e.data_index+"\\"+e.data_id+" 历史版本",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[e.data.length>0?a("el-table",{attrs:{data:e.data,"max-height":e.max_height,stripe:""}},[a("el-table-column",{attrs:{prop:"S-changer",label:"修改者",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"S-update-time",label:"修改时间",fixed:""}}),e._v(" "),e._l(e.data[0],function(t,r){return"S"!=r[0]?a("el-table-column",{key:r,attrs:{label:r},scopedSlots:e._u([{key:"default",fn:function(s){return[a("span",{style:{color:null==t?"#C0C4CC":"#606266"}},[e._v(e._s(null==s.row[r]?"null":s.row[r]))])]}}])}):e._e()})],2):a("p",{staticStyle:{"text-align":"center"}},[e._v("没有修改记录")])],1)},staticRenderFns:[]},n=a("VU/8")(s,o,!1,null,null,null);t.default=n.exports},IcnI:function(e,t,a){"use strict";var r={};a.d(r,"increment",function(){return d}),a.d(r,"logout",function(){return u}),a.d(r,"login",function(){return c});var s=a("7+uW"),o=a("NYxO"),n=a("BO1k"),i=a.n(n),l={set_cookie:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=new Date;r.setTime(r.getTime()+24*a*3600*1e3),document.cookie=e+"="+t+";expires="+r.toString()},get_cookie:function(e){var t=document.cookie.split("; "),a=!0,r=!1,s=void 0;try{for(var o,n=i()(t);!(a=(o=n.next()).done);a=!0){var l=o.value.split("=");if(e==l[0])return l[1]}}catch(e){r=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(r)throw s}}}};function d(e){e.count++}function u(e){e.is_logged=!1,l.set_cookie("token",""),l.set_cookie("username",""),e.token="",e.username=""}var c=function(e,t){console.log("data:",t),console.log("data.username:",t.username),l.set_cookie("token","JWT "+t.token,1),l.set_cookie("username",t.username,1),e.is_logged=!0,e.token="JWT "+t.token,e.username=t.username};s.default.use(o.a);var m=!1;l.get_cookie("token")&&(console.log("token:"+l.get_cookie("token")),m=!0,console.log("is_logged:",m));var f=new o.a.Store({state:{count:0,is_logged:m,token:l.get_cookie("token"),username:l.get_cookie("username")},mutations:r});t.a=f},M3hL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("gyMJ"),s={data:function(){return console.log("this.props.data:",this.data),{is_visible:!0,form_data:{},errors:{},countdown:0,confirm_password:""}},props:["data"],mounted:function(){},methods:{on_close:function(){this.$el.parentNode.removeChild(this.$el),this.$destroy()},submit:function(){var e=this;if(this.confirm_password!=this.form_data.new_password)return console.log("不一致"),void(this.errors.confirm_password="两次密码不一致");r.a.post("mgmt/user/change-password",this.form_data).then(function(t){e.$message.success("修改成功"),e.errors={}}).catch(function(t){if(t.response&&t.response.data)return t.response.data.detail?void e.$message.error(t.response.data.detail):void(e.errors=t.response.data);console.log(t.message)})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"440px",title:"修改密码",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("el-form",{staticStyle:{"margin-right":"50px"},attrs:{"label-width":"100px"}},[a("h3",{staticStyle:{color:"#f56c6c","text-align":"center"}},[e._v(e._s(String(e.errors.non_field_errors?e.errors.non_field_errors:"")))]),e._v(" "),a("el-form-item",{attrs:{label:"当前密码",required:!0,error:String(e.errors.current_password?e.errors.current_password:"")}},[a("el-input",{attrs:{type:"password"},model:{value:e.form_data.current_password,callback:function(t){e.$set(e.form_data,"current_password",t)},expression:"form_data.current_password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新密码",required:!0,error:String(e.errors.new_password?e.errors.new_password:"")}},[a("el-input",{attrs:{type:"password"},model:{value:e.form_data.new_password,callback:function(t){e.$set(e.form_data,"new_password",t)},expression:"form_data.new_password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",required:!0,error:String(e.errors.confirm_password?e.errors.confirm_password:"")}},[a("el-input",{attrs:{type:"password"},model:{value:e.confirm_password,callback:function(t){e.confirm_password=t},expression:"confirm_password"}})],1),e._v(" "),a("el-button",{staticStyle:{width:"100%","margin-left":"50px"},attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")])],1)],1)},staticRenderFns:[]},n=a("VU/8")(s,o,!1,null,null,null);t.default=n.exports},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("7+uW"),s={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view")},staticRenderFns:[]},o=a("VU/8")(null,s,!1,null,null,null).exports,n=a("YaEn"),i=a("zL8q"),l=a.n(i),d=(a("tvR6"),a("IcnI")),u=a("E4+W"),c=a("OPtV"),m=a("qKjf"),f=a("p5so"),p=a("Tpv7"),_=a("3BNv"),v=a("b2E8"),h=a("0RRq"),b=a("M3hL"),g=a("9rwn");r.default.config.productionTip=!1,r.default.use(l.a);var y=new r.default({el:"#app",router:n.a,store:d.a,components:{App:o},template:"<App/>"});t.default=y;r.default.component("HistoricalRecord",u.default),r.default.component("DataDetail",c.default),r.default.component("ChangeData",m.default),r.default.component("AddData",f.default),r.default.component("ShowTable",p.default),r.default.component("DeletedDataDetail",_.default),r.default.component("ChangeTable",v.default),r.default.component("ResetPassword",h.default),r.default.component("ChangeUser",g.default),r.default.component("ChangePassword",b.default)},OPtV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={data:function(){return console.log("this.props.data:",this.data),{is_visible:!0,ddd:[{name:"zhangsan"}]}},props:["data","source"],mounted:function(){console.log("mounted"),console.log("data:",this.data),console.log("table_data:",this.table_data)},methods:{on_close:function(){this.$el.parentNode.removeChild(this.$el),this.$destroy()}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"900px",title:e.data._index+"\\"+e.data._id+" 详细信息",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("el-table",{attrs:{data:[e.data._source],fit:"",stripe:""}},[a("el-table-column",{attrs:{prop:"S-creator",label:"创建者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"S-creation-time",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"S-last-modified",label:"最后修改人"}}),e._v(" "),e._l(e.data._source,function(t,r){return"S"!=r[0]?a("el-table-column",{key:r,attrs:{label:r},scopedSlots:e._u([{key:"default",fn:function(r){return[a("span",{style:{color:null==t?"#C0C4CC":"#606266"}},[e._v(e._s(null==t?"null":t))])]}}])}):e._e()})],2)],1)},staticRenderFns:[]},o=a("VU/8")(r,s,!1,null,null,null);t.default=o.exports},Opzk:function(e,t,a){var r={"./ModifyData.vue":["I6eP",13],"./deleted-display/DisplayData.vue":["bmjW",4],"./deleted-display/components/DataItem.vue":["lITE",15],"./deleted-display/components/DeletedDataDetail.vue":["3BNv"],"./display-data/DisplayData.vue":["HBkg",2],"./display-data/components/AddData.vue":["p5so"],"./display-data/components/ChangeData.vue":["qKjf"],"./display-data/components/DataDetail.vue":["OPtV"],"./display-data/components/DataItem.vue":["M+Hp",7],"./display-data/components/HistoricalRecord.vue":["E4+W"],"./display-data/components/ShowTable.vue":["Tpv7"],"./layout/Layout.vue":["AkUR",1,0],"./layout/components/Aside.vue":["NxI4",0,16],"./layout/components/Header.vue":["RvH3",5],"./layout/components/TableList.vue":["H8ly",0],"./table-mgmt/TableMgmt.vue":["RKvT",10],"./table-mgmt/components/ChangeTable.vue":["b2E8"],"./test/Test1.vue":["vEFi",21],"./test/Test2.vue":["8+l6",20],"./test/Test3.vue":["po2q",9],"./test/Test4.vue":["hLNt",19],"./test/Test5.vue":["aEJ7",3],"./test/Test6.vue":["frb6",18],"./test/components/Child1.vue":["vtBF",14],"./test/components/Dialog1.vue":["g6tl",17],"./test/components/Dialog2.vue":["8lLu",12],"./user-mgmt/UserMgmt.vue":["9GxW",8],"./user-mgmt/components/ChangeUser.vue":["9rwn"],"./user/User.vue":["+c0R",11],"./user/components/ChangePassword.vue":["M3hL"],"./user/components/Login.vue":["UAoE",6],"./user/components/ResetPassword.vue":["0RRq"]};function s(e){var t=r[e];return t?Promise.all(t.slice(1).map(a.e)).then(function(){return a(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}s.keys=function(){return Object.keys(r)},s.id="Opzk",e.exports=s},Q8Yq:function(e,t){},QuAL:function(e,t){},Tpv7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("gyMJ"),s={0:"字符串",1:"整数",2:"浮点数",3:"日期时间"},o={data:function(){return{is_visible:!0,form_data:{},fields:[],errors:{},TYPE_MAP:s}},props:["table"],mounted:function(){var e=this;console.log("table.fields:",this.table.fields),r.a.options("data/"+this.table.name).then(function(t){e.fields=t.actions.POST}).catch(function(e){})},methods:{on_close:function(){this.$el.parentNode.removeChild(this.$el),this.$destroy()},submit:function(){var e=this;r.a.put("data/"+this.table_name+"/"+this.data._id,this.form_data).then(function(t){e.$message.success("添加成功")}).catch(function(t){if(console.log("exc.reponse:",t.response),t.response&&t.response.data)return t.response.data.detail?void e.$message.error(t.response.data.detail):void(e.errors=t.response.data);console.log(t.message)})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"表 "+e.table.name+" 详细信息",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("table",{staticStyle:{width:"100%",padding:"15px"}},[a("tr",[a("td",{staticStyle:{color:"#909399",width:"13%"}},[e._v("表名:")]),e._v(" "),a("td",{staticStyle:{color:"#606266",width:"37%"}},[e._v(e._s(e.table.name))]),e._v(" "),a("td",{staticStyle:{color:"#909399",width:"13%"}},[e._v("创建者")]),e._v(" "),a("td",{staticStyle:{color:"#606266",width:"37%"}},[e._v(e._s(e.table.creator_username))])]),e._v(" "),a("tr",[a("td",{staticStyle:{color:"#909399"}},[e._v("别名:")]),e._v(" "),a("td",{staticStyle:{color:"#606266"}},[e._v(e._s(e.table.alias))]),e._v(" "),a("td",{staticStyle:{color:"#909399"}},[e._v("创建时间:")]),e._v(" "),a("td",{staticStyle:{color:"#606266"}},[e._v(e._s(e.table.creation_time))])]),e._v(" "),a("tr",[a("td",{staticStyle:{color:"#909399"}},[e._v("自述:")]),e._v(" "),a("td",{staticStyle:{color:"#606266"},attrs:{colspan:"3"}},[e._v(e._s(e.table.readme))])])]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.table.fields}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"自述:"}},[a("span",[e._v(e._s(t.row.readme))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"字段名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"alias",label:"别名"}}),e._v(" "),a("el-table-column",{attrs:{label:"必须"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(String(t.row.required)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"多值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(String(t.row.is_multi)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.TYPE_MAP[t.row.type]))])]}}])})],1)],1)},staticRenderFns:[]},i=a("VU/8")(o,n,!1,null,null,null);t.default=i.exports},YaEn:function(e,t,a){"use strict";var r=a("7+uW"),s=a("/ocq"),o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h1",[e._v(e._s(e.msg))]),e._v(" "),a("h2",[e._v("Essential Links")]),e._v(" "),e._m(0),e._v(" "),a("h2",[e._v("Ecosystem")]),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[e._v("\n        Core Docs\n      ")])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[e._v("\n        Forum\n      ")])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[e._v("\n        Community Chat\n      ")])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[e._v("\n        Twitter\n      ")])]),e._v(" "),a("br"),e._v(" "),a("li",[a("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[e._v("\n        Docs for This Template\n      ")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};a("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},o,!1,function(e){a("1uuo")},"data-v-d8ec41bc",null).exports;var n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[e._v("这是一段信息")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)])},staticRenderFns:[]};a("VU/8")({name:"login",data:function(){return{dialogVisible:!0}},methods:{handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})}}},n,!1,function(e){a("Q8Yq")},"data-v-562c3756",null).exports,a("NHnr");var i=a("A66B");r.default.use(s.a);var l=new s.a({routes:[{path:"/test1",name:"test1",component:i("test/Test1")},{path:"/test2",name:"test2",component:i("test/Test2")},{path:"/test3",name:"test3",component:i("test/Test3")},{path:"/test4",name:"test4",component:i("test/Test4")},{path:"/test5",name:"test5",component:i("test/Test5")},{path:"/test6",name:"test6",component:i("test/Test6")},{path:"/",name:"index",component:i("layout/Layout"),children:[{path:"",name:"main",component:i("display-data/DisplayData")},{path:"deleted",name:"deleted",component:i("deleted-display/DisplayData")},{path:"table",name:"table",component:i("table-mgmt/TableMgmt")},{path:"user",name:"user",component:i("user-mgmt/UserMgmt")}]},{path:"/user",component:i("user/User"),children:[{path:"login",name:"login",component:i("user/components/Login")}]}]});t.a=l;l.beforeEach(function(e,t,a){a()})},b2E8:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mvHQ"),s=a.n(r),o=a("gyMJ"),n={name:"change-table",data:function(){return{is_visible:!0,form_data:this.is_create?{name:"",alias:"",readme:"",fields:[{name:"",alias:"",readme:"",type:0,is_multi:!1,required:!1}]}:JSON.parse(s()(this.data)),errors:{}}},props:["is_create","data"],mounted:function(){},methods:{on_close:function(){this.$el.parentNode.removeChild(this.$el),this.$destroy()},on_add_field:function(){this.form_data.fields.push({id:Math.floor(1e7*Math.random()+1e7),name:"",alias:"",readme:"",type:0,is_multi:!1,required:!1}),("{}"!=s()(this.errors)||this.errors.fields)&&this.errors.fields.push({})},on_delete_filed:function(e,t){console.log("this.from_data:",this.form_data),this.form_data.fields.splice(t,1),("{}"!=s()(this.errors)||this.errors.fields)&&errors.fields&&this.errors.fields.splice(t,1)},on_submit:function(){var e=this;this.is_create?o.b.post("mgmt/table",this.form_data).then(function(t){e.$message.success("添加成功"),e.errors={},e.$emit("add_table",t.data)}).catch(function(t){e.errors=t.response.data}):o.b.put("mgmt/table/"+this.data.name,this.form_data).then(function(t){for(var a in e.$message.success("修改成功"),e.errors={},e.form_data)e.data[a]=e.form_data[a]}).catch(function(t){e.errors=t.response.data})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"900px",title:e.data?"修改表 "+e.data.name:"创建表",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("el-form",{attrs:{inline:!0,size:"small","label-width":"60px"}},[a("el-form-item",{attrs:{label:"表名:",error:String(e.errors.name?e.errors.name:"")}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.form_data.name,callback:function(t){e.$set(e.form_data,"name",t)},expression:"form_data.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"别名:",error:String(e.errors.alias?e.errors.alias:"")}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.form_data.alias,callback:function(t){e.$set(e.form_data,"alias",t)},expression:"form_data.alias"}})],1)],1),e._v(" "),a("el-form",{attrs:{"label-width":"60px",size:"small"}},[a("el-form-item",{attrs:{label:"自诉:",error:String(e.errors.readme?e.errors.readme:"")}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form_data.readme,callback:function(t){e.$set(e.form_data,"readme",t)},expression:"form_data.readme"}})],1)],1),e._v(" "),e._l(e.form_data.fields,function(t,r){return a("el-form",{key:t.id,attrs:{size:"small",inline:!0,"label-width":"60px"}},[a("el-form-item",{staticStyle:{"margin-right":"0px"},attrs:{label:"字段:"}}),e._v(" "),a("el-form-item",{staticStyle:{width:"80px"},attrs:{error:String(e.errors.fields&&e.errors.fields[r].name?e.errors.fields[r].name:"")}},[a("el-input",{attrs:{placeholder:"字段名"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"80px"},attrs:{error:String(e.errors.fields&&e.errors.fields[r].alias?e.errors.fields[r].alias:"")}},[a("el-input",{attrs:{placeholder:"别名"},model:{value:t.alias,callback:function(a){e.$set(t,"alias",a)},expression:"item.alias"}})],1),e._v(" "),a("el-form-item",{attrs:{error:String(e.errors.fields&&e.errors.fields[r].type?e.errors.fields[r].type:"")}},[a("el-radio-group",{attrs:{size:"mini"},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"item.type"}},[a("el-radio-button",{attrs:{label:"0"}},[e._v("字符串")]),e._v(" "),a("el-radio-button",{attrs:{label:"1"}},[e._v("整数")]),e._v(" "),a("el-radio-button",{attrs:{label:"2"}},[e._v("浮点数")]),e._v(" "),a("el-radio-button",{attrs:{label:"3"}},[e._v("日期时间")])],1)],1),e._v(" "),a("el-form-item",{attrs:{error:String(e.errors.fields&&e.errors.fields[r].required?e.errors.fields[r].required:"")}},[a("el-checkbox",{attrs:{disabled:t.is_multi},model:{value:t.required,callback:function(a){e.$set(t,"required",a)},expression:"item.required"}},[e._v("必填")])],1),e._v(" "),a("el-form-item",{attrs:{error:String(e.errors.fields&&e.errors.fields[r].is_multi?e.errors.fields[r].is_multi:"")}},[a("el-checkbox",{model:{value:t.is_multi,callback:function(a){e.$set(t,"is_multi",a)},expression:"item.is_multi"}},[e._v("多值")])],1),e._v(" "),a("el-form-item",{attrs:{error:String(e.errors.fields&&e.errors.fields[r].readme?e.errors.fields[r].readme:"")}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"自述"},model:{value:t.readme,callback:function(a){e.$set(t,"readme",a)},expression:"item.readme"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{padding:"2px 4px"},attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){e.on_delete_filed(t,r)}}})],1)],1)}),e._v(" "),a("el-button",{staticStyle:{width:"800px",margin:"10px 40px"},attrs:{size:"small",icon:"el-icon-circle-plus-outline"},on:{click:e.on_add_field}},[e._v("添加字段")]),e._v(" "),a("el-button",{staticStyle:{width:"800px",margin:"10px 40px"},attrs:{size:"small",type:"primary"},on:{click:e.on_submit}},[e._v("提交")])],2)},staticRenderFns:[]};var l=a("VU/8")(n,i,!1,function(e){a("oqYE")},"data-v-eaf026f6",null);t.default=l.exports},gyMJ:function(e,t,a){"use strict";a.d(t,"b",function(){return c});var r=a("//Fk"),s=a.n(r),o=a("mtWM"),n=a.n(o),i=(a("YaEn"),a("IcnI")),l=a("NHnr"),d=window.location.protocol+"//"+window.location.host+"/api/v1/",u=n.a.create({baseURL:d,timeout:5e3});t.a=u;var c=n.a.create({baseURL:d,timeout:5e3});u.interceptors.request.use(function(e){if(i.a.state.is_logged){if(console.log("config:",e),e.data)for(var t in e.data)""==e.data[t]&&delete e.data[t];e.headers.Authorization=i.a.state.token}return e},function(e){return s.a.reject(e)}),u.interceptors.response.use(function(e){return e},function(e){if(e.response){if(400==e.response.status)return s.a.reject(e);if(401==e.response.status)l.default.$confirm("是否前往登录","尚未登录",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info",center:!0}).then(function(){l.default.$router.push({name:"login",query:{next:l.default.$route.fullPath}})});else if(403==e.response.status){if("Signature has expired."==e.response.data.detail||"Error decoding signature."==e.response.data.detail)return void l.default.$confirm("是否前往登录","登录过期",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info",center:!0}).then(function(){l.default.$router.push({name:"login",params:{next:l.default.$router.path}})});l.default.$message({message:"没有权限",type:"warning"})}}return s.a.reject(e)}),c.interceptors.request.use(function(e){return i.a.state.is_logged&&(e.headers.Authorization=i.a.state.token),e},function(e){return s.a.reject(e)}),c.interceptors.response.use(function(e){return console.log("interceptors response"),e},function(e){if(console.log("interceptors error"),e.response){if(400==e.response.status||404==e.response.status)console.log("400 404:",e.response.data),e.response.data.detail?(console.log("detail"),l.default.$message.error(e.response.data.detail)):l.default.$message.error(e.response.data);else{if(401==e.response.status)return void l.default.$confirm("是否前往登录","尚未登录",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info",center:!0}).then(function(){l.default.$router.push({name:"login",query:{next:l.default.$route.fullPath}})});if(403==e.response.status){if("Signature has expired."==e.response.data.detail||"Error decoding signature."==e.response.data.detail)return void l.default.$confirm("是否前往登录","登录过期",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info",center:!0}).then(function(){l.default.$router.push({name:"login",params:{next:l.default.$router.path}})});l.default.$message({message:"没有权限",type:"warning"})}}return s.a.reject(e)}return e.message?l.default.$message.error(e.message):l.default.$message.error(e),s.a.reject(e)})},oqYE:function(e,t){},p5so:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("gyMJ"),s={data:function(){return{is_visible:!0,form_data:{},fields:[],errors:{}}},props:["table_name"],mounted:function(){var e=this;r.a.options("data/"+this.table_name).then(function(t){e.fields=t.data.actions.POST}).catch(function(e){})},methods:{on_close:function(){this.$el.parentNode.removeChild(this.$el),this.$destroy()},submit:function(){var e=this;r.a.post("data/"+this.table_name,this.form_data).then(function(t){e.$message.success("添加成功"),e.errors={}}).catch(function(t){if(console.log("exc.reponse:",t.response),t.response&&t.response.data)return t.response.data.detail?void e.$message.error(t.response.data.detail):void(e.errors=t.response.data);console.log(t.message)})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"向 "+e.table_name+" 添加记录",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("el-form",{staticStyle:{"margin-right":"50px"},attrs:{"label-width":"120px",size:"small"}},[e._l(e.fields,function(t,r){return"S"!=r[0]?a("el-form-item",{key:r,attrs:{label:r,required:t.required,error:e.errors[r]?String(e.errors[r]):""}},["list"==t.type?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:t.label+" | type:"+t.type+"/"+t.child.type,multiple:"",filterable:"","allow-create":"","default-first-option":"",remote:""},model:{value:e.form_data[r],callback:function(t){e.$set(e.form_data,r,t)},expression:"form_data[k]"}}):a("el-input",{attrs:{placeholder:t.label+" | type:"+t.type},model:{value:e.form_data[r],callback:function(t){e.$set(e.form_data,r,t)},expression:"form_data[k]"}})],1):e._e()}),e._v(" "),a("el-button",{staticStyle:{width:"100%","margin-left":"50px"},attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")])],2)],1)},staticRenderFns:[]},n=a("VU/8")(s,o,!1,null,null,null);t.default=n.exports},qKjf:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("gyMJ"),s={data:function(){return console.log("this.props.data:",this.data),{is_visible:!0,form_data:this.data._source,fields:[],errors:{}}},props:["data"],mounted:function(){var e=this;r.a.options("data/"+this.data._index).then(function(t){e.fields=t.data.actions.POST}).catch(function(t){t.response&&t.response.data&&e.$message.error(e.response.data),console.log(t.message)})},methods:{on_close:function(){this.$el.parentNode.removeChild(this.$el),this.$destroy()},submit:function(){var e=this;r.a.put("data/"+this.data._index+"/"+this.data._id,this.form_data).then(function(t){e.$message.success("修改成功"),e.errors={}}).catch(function(t){if(console.log("exc.reponse:",t.response),t.response&&t.response.data)return t.response.data.detail?void e.$message.error(t.response.data.detail):void(e.errors=t.response.data);console.log(t.message)})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.data._index+"\\"+e.data._id+" 修改",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("el-form",{staticStyle:{"margin-right":"50px"},attrs:{"label-width":"100px",size:"small"}},[e._l(e.fields,function(t,r){return"S"!=r[0]?a("el-form-item",{key:r,attrs:{label:r,required:t.required,error:e.errors[r]?String(e.errors[r]):""}},["list"==t.type?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:null==t.label?"":t.label+"/"+t.type,multiple:"",filterable:"","allow-create":"","default-first-option":"",remote:""},model:{value:e.form_data[r],callback:function(t){e.$set(e.form_data,r,t)},expression:"form_data[k]"}}):a("el-input",{attrs:{placeholder:null==t.label?r:t.label+"/"+t.type},model:{value:e.form_data[r],callback:function(t){e.$set(e.form_data,r,t)},expression:"form_data[k]"}})],1):e._e()}),e._v(" "),a("el-button",{staticStyle:{width:"100%","margin-left":"50px"},attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("提交")])],2)],1)},staticRenderFns:[]},n=a("VU/8")(s,o,!1,null,null,null);t.default=n.exports},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.07681dd74aba7c5e48b0.js.map